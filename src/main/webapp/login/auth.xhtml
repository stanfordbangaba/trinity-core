<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Login</title>
	<link rel="icon" href='#{resource["favicon.ico"]}' />
	<link rel="stylesheet" href='#{resource["bootstrap.css"]}' />
	<link rel="stylesheet" href='#{resource["forge-style.css"]}' />
</h:head>

<h:body>
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<h3 style="color: white;">Trinity-core</h3>
			</div>
		</div>
	</div>
	<div class="container forgecontainer">
		<div id="navigation">
			<img src='#{resource["bank-logo.jpg"]}' alt="Trinity... all-in-one" border="0" />
			<hr/>
		</div>
		<div id="content">
			<h1 style="color: olive;">User Authentication</h1>
			<h:form id="auth">
		
			    <p:growl id="growl" showDetail="true" life="3000" />
			    
				<p:dialog header="Login" widgetVar="dlg" resizable="false" visible="true" closable="false"
					showEffect="fade" hideEffect="explode">
        			<h:panelGrid columns="2" cellpadding="5">
				
						<h:outputLabel for="username" value="Username"/>
						<p:inputText type="text" id="username" name="username" value="#{loginBean.username}" 
							required="true" requiredMessage="Username is required"/>
						
						<h:outputLabel for="password" value="Password"/>
						<p:password id="password" name="password" value="#{loginBean.password}" 
							required="true" requiredMessage="Password is required" feedback="true" inline="true"/>
						
						<f:facet name="footer">
							<p:commandButton type="submit" actionListener="#{loginBean.login}" value="Login"
								update="growl" oncomplete="handleLoginRequest(xhr, status, args)"/>
						</f:facet>
					
					</h:panelGrid>
    			</p:dialog>
			</h:form>
		</div>
		<footer>
			<div id="footer-wrapper" style="margin-top: 130px;">
				<hr/>
	    		<p style="color: olive;">Powered by <a href="#">Bangsoft</a></p>
	    	</div>
		</footer>
	</div>
	<script type="text/javascript">
	    function handleLoginRequest(xhr, status, args) {
	        if(args.validationFailed || !args.loggedIn) {
	            PF('dlg').jq.effect("shake", {times:5}, 100);
	        }
	        else {
	            PF('dlg').hide();
	            $('#loginLink').fadeOut();
	            window.location.href = '/trinity-core/index.xhtml';
	        }
	    }
</script>
</h:body>
</html>